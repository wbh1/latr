# Local development configuration for latr
#
# Setup instructions:
# 1. Copy this file to config.local.yml in the project root
# 2. Replace YOUR_LINODE_API_TOKEN_HERE with your actual Linode API token
# 3. Run: docker-compose up --build
#
# The vault credentials below are fixed dev credentials created by vault-init service

daemon:
  mode: "daemon"                   # "daemon" or "one-shot"
  check_interval: "1m"            # How often to check tokens (daemon mode only)
  dry_run: false                   # If true, no actual changes are made

rotation:
  threshold_percent: 40
  prune_expired: true

vault:
  # Use docker service name for Vault address
  address: "http://vault:8200"
  # Fixed dev credentials (created by vault-init service)
  role_id: "dev-role-id-12345678"
  secret_id: "dev-secret-id-87654321"
  mount_path: "secret"

# Observability settings
observability:
  otel_endpoint: "otelcol:4317"  # OpenTelemetry collector endpoint (optional)
  log_level: "debug"                # debug, info, warn, error

tokens:
  # Example token configuration - customize as needed
  - label: "latr-dev-test-token-1"
    team: "local-dev"
    validity: "5m"
    scopes: "linodes:read_only"
    storage:
      - type: "vault"
        path: "latr-dev/latr-dev-test-token-1"
  - label: "latr-dev-test-token-2"
    team: "local-dev"
    validity: "5m"
    scopes: "linodes:read_only"
    storage:
      - type: "vault"
        path: "latr-dev/latr-dev-test-token-2"

